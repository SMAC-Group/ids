<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Homework 2 • stat297</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">stat297</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/syllabus.html">Syllabus</a>
</li>
<li>
  <a href="../articles/schedule.html">Schedule</a>
</li>
<li>
  <a href="../articles/homework.html">Homework</a>
</li>
<li>
  <a href="../articles/project.html">Project</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/SMAC-Group/stat297">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Homework 2</h1>
                        <h4 class="author">Stéphane Guerrier &amp; Justin Lee</h4>
            
            <h4 class="date">08 November, 2017</h4>
          </div>

    
    
<div class="contents">
<div class="alert alert-danger">
<p><strong>Important:</strong> To submit your homework share your GitHub repository with <strong>stephaneguerrier</strong> and <strong>munsheet</strong> by the deadline, 4PM 10/13/2017. <strong>Do not modify your homework after the deadline</strong>. We will grade the version of your RMarkdown file that’s closest to 4PM 10/13/2017.</p>
</div>
<p>The objectives of this homework assignment are the following:</p>
<ul>
<li>Learn how program effectively using if/else and iterations statements;</li>
<li>Become familiar with using data frame objects and mapping packages;</li>
<li>Constructing a portfolio;</li>
<li>Become familiar with GitHub and using it as a collaborative tool.</li>
</ul>
<p>To start, create a (perferably private) GitHub repository for your group, and name it <strong>stat297hw2</strong>. Be sure to add <strong>munsheet</strong> and <strong>stephaneguerrier</strong> as collaborators.</p>
<p>This project <strong>must</strong> be done using GitHub and respect the following requirements:</p>
<ul>
<li>Each member of the group must <code>commit</code> at least once.</li>
<li>All commit messages must be reasonably <code>clear</code> and <code>meaningful</code>.<br>
</li>
<li>Your GitHub repository must include at least one <code>issue</code> containing some form of a TO DO list.</li>
</ul>
<div id="fizz-buzz" class="section level1">
<h1 class="hasAnchor">
<a href="#fizz-buzz" class="anchor"></a>Fizz Buzz</h1>
<p>Write a program that prints the numbers from 1 to 1000. But for multiples of three print “Fizz” instead of the number and for the multiples of five print “Buzz”. For numbers which are multiples of both three and five print “FizzBuzz”.</p>
<p>An example output would be:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">1</span>, <span class="dv">2</span>, Fizz, <span class="dv">4</span>, Buzz, Fizz, <span class="dv">7</span>, <span class="dv">8</span>, Fizz, Buzz, <span class="dv">11</span>, Fizz, <span class="dv">13</span>, <span class="dv">14</span>, Fizz Buzz, <span class="dv">16</span>, <span class="dv">17</span>, Fizz, <span class="dv">19</span>, Buzz, Fizz, <span class="dv">22</span>, <span class="dv">23</span>, Fizz, Buzz, <span class="dv">26</span>, Fizz, <span class="dv">28</span>, <span class="dv">29</span>, Fizz Buzz, <span class="dv">31</span>, <span class="dv">32</span>, Fizz, <span class="dv">34</span>, Buzz, Fizz, ...</code></pre></div>
</div>
<div id="map" class="section level1">
<h1 class="hasAnchor">
<a href="#map" class="anchor"></a>Map</h1>
<p>Using the same tools we used in class, create a simple map to represent current standing in the Big Ten football conference. More specifically, the goal of this problem is to reproduce as closely as possible the map below:</p>
<center>
<img src="hw2_map.png" style="width:50.0%">
</center>
<p>Note that the code below was used to download the data needed for this graph:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(maps)
<span class="kw">library</span>(ggmap)
<span class="kw">library</span>(rvest)

<span class="co"># Define webpage</span>
big10 =<span class="st"> </span><span class="kw">read_html</span>(<span class="st">"http://www.bigten.org/library/stats/fb-confsked.html#standings"</span>)

<span class="co"># Get uni names</span>
big10 %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw">html_nodes</span>(<span class="st">".b1gfbstats:nth-child(9) td:nth-child(1) , .b1gfbstats:nth-child(6) td:nth-child(1)"</span>) %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw">html_text</span>() -&gt;<span class="st"> </span>uni_name
uni_name =<span class="st"> </span><span class="kw">paste</span>(uni_name,<span class="st">"University"</span>)

<span class="co"># Find uni locations</span>
uni_coord =<span class="st"> </span><span class="kw">data.frame</span>(<span class="kw">geocode</span>(uni_name))

<span class="co"># Get win rate</span>
big10 %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw">html_nodes</span>(<span class="st">"td:nth-child(7)"</span>) %&gt;%
<span class="st">    </span><span class="kw">html_text</span>() -&gt;<span class="st"> </span>uni_wp
uni_coord$wp =<span class="st"> </span><span class="dv">100</span>*<span class="kw">as.numeric</span>(uni_wp[<span class="dv">1</span>:<span class="kw">length</span>(uni_name)])

<span class="co"># Get division</span>
uni_coord$conf =<span class="st"> </span><span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">"East Division"</span>,<span class="st">"West Division"</span>), <span class="dt">each =</span> <span class="kw">length</span>(uni_name)/<span class="dv">2</span>)</code></pre></div>
</div>
<div id="d-random-walks" class="section level1">
<h1 class="hasAnchor">
<a href="#d-random-walks" class="anchor"></a>3D-random walks</h1>
<p>In this problem you will program a three-dimensional random walk. For this purpose we will consider a three-dimensional space where we let <span class="math inline">\(\mathbf{X}_0 = [0 \;\; 0\;\; 0]^T\)</span> denote the starting point of our process. Suppose that there exist a sequence of random variables <span class="math inline">\(U_1, \cdots, U_B\)</span> such <span class="math inline">\(U_t \stackrel{iid}{\sim} \mathcal{U}(0,1)\)</span>. Then, we let the position at time <span class="math inline">\(t\)</span> (where <span class="math inline">\(1 \leq t \leq B\)</span>) be given by</p>
<p><span class="math display">\[
\mathbf{X}_t = \mathbf{X}_{t - 1} + \mathbf{f}(U_t), 
\]</span></p>
<p>where</p>
<p><span class="math display">\[
\mathbf{f}(U_t) = \left\{
    \begin{array}{ll}
        [\phantom{-}1 \; \,\;\phantom{-}0 \; \,\;\phantom{-}0]^T  &amp; \mbox{if } U_t \leq a_1 \\
        [     -1      \; \,\;\phantom{-}0 \; \,\;\phantom{-}0]^T  &amp; \mbox{if } U_t \in (a_1, \, a_2] \\
        [\phantom{-}0 \; \,\;\phantom{-}1 \; \,\;\phantom{-}0]^T  &amp; \mbox{if } U_t \in (a_2, \, a_3] \\
        [\phantom{-}0 \; -1       \; \,\;\phantom{-}0]^T  &amp; \mbox{if } U_t \in (a_3, \, a_4] \\
        [\phantom{-}0 \; \,\;\phantom{-}0 \; \,\;\phantom{-}1]^T  &amp; \mbox{if } U_t \in (a_4, \, a_5] \\
        [\phantom{-}0 \; \,\;\phantom{-}0 \; -1]^T  &amp; \mbox{if } U_t &gt; a_5. \\
    \end{array}
\right.
\]</span></p>
<p>So for example, if we consider <span class="math inline">\(B = 2\)</span>, <span class="math inline">\(a_i = \frac{i}{6}\)</span>, <span class="math inline">\(U_1 = 0.12\)</span> and <span class="math inline">\(U_2 = 0.81\)</span> then we have</p>
<p><span class="math display">\[\mathbf{X}_1 = \mathbf{X}_0 + \mathbf{f}(U_t = 0.12) = \left[
\begin{matrix}
0\\
0\\
0\\
\end{matrix}\right] + \left[
\begin{matrix}
1\\
0\\
0\\
\end{matrix}\right] = \left[
\begin{matrix}
1\\
0\\
0\\
\end{matrix}\right]. \]</span></p>
<p>and</p>
<p><span class="math display">\[\mathbf{X}_2 = \mathbf{X}_1 + \mathbf{f}(U_t = 0.81) = \left[
\begin{matrix}
1\\
0\\
0\\
\end{matrix}\right] + \left[
\begin{matrix}
0\\
0\\
1\\
\end{matrix}\right] = \left[
\begin{matrix}
1\\
0\\
1\\
\end{matrix}\right]. \]</span></p>
<ul>
<li>
<strong>(a)</strong> Using the same idea, simulate a three-dimensional random walk with <span class="math inline">\(B = 10^4\)</span>, <span class="math inline">\(a_i = \frac{i}{6}\)</span> and with <span class="math inline">\(U_t\)</span> being obtained as follows</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">B &lt;-<span class="st"> </span><span class="dv">10</span>^<span class="dv">4</span>
<span class="kw">set.seed</span>(<span class="dv">1982</span>)
Ut &lt;-<span class="st"> </span><span class="kw">runif</span>(B)
<span class="kw">head</span>(Ut)</code></pre></div>
<pre><code>## [1] 0.7533571 0.6056869 0.4977858 0.6473441 0.2183902 0.4594699</code></pre>
<p>Therefore, <span class="math inline">\(U_t\)</span> corresponds to the <em>t</em>-th element <code>Ut</code>. Using the characteristics, show that</p>
<p><span class="math display">\[
X_B = \left[\begin{matrix}
\phantom{-}26\\
          -44\\
\phantom{-}26\\
\end{matrix}\right],
\]</span></p>
<p>and provide a graphical respresentation of your random walk. For example, you can produce a graph similar to the one below which is based on the function <code>segments3D</code> from the <code>plot3D</code> package. Note that the red and blue points indicate, respectively the starting and end points of the random walk.</p>
<center>
<img src="hw2_2a.png" style="width:50.0%">
</center>
<ul>
<li>
<strong>(b)</strong> Repeat what you have in part <strong>(a)</strong> but with <span class="math inline">\(B = 10^5\)</span>, <span class="math inline">\(a_i = 0.99 \frac{i}{6}\)</span> and with <span class="math inline">\(U_t\)</span> being obtained as follows</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">B &lt;-<span class="st"> </span><span class="dv">10</span>^<span class="dv">5</span>
<span class="kw">set.seed</span>(<span class="dv">2000</span>)
Ut &lt;-<span class="st"> </span><span class="kw">runif</span>(B)
<span class="kw">head</span>(Ut)</code></pre></div>
<pre><code>## [1] 0.1965959 0.7164260 0.3620857 0.3910775 0.8133072 0.4279599</code></pre>
<p>You should obtain</p>
<p><span class="math display">\[
X_B = \left[\begin{matrix}
\phantom{-}142\\
-133\\
-899\\
\end{matrix}\right],
\]</span></p>
<p>and produce a graph similar to:</p>
<center>
<img src="hw2_2b.png" style="width:50.0%">
</center>
<ul>
<li>
<strong>(c) - bonus:</strong> Show that using the setting of part <strong>(b)</strong> we have:</li>
</ul>
<p><span class="math display">\[\mathbb{E} \left[ X_B \right] = \left[\begin{matrix}
0\\
0\\
-0.01 B\\
\end{matrix}\right]. \]</span></p>
<p>Does this result make sense given the end of the process simulated in part <strong>(b)</strong></p>
<ul>
<li>
<strong>(d) - bonus</strong> Create a video to show how a random walk changes in time (an example is provided in file “RW3D.html” posted on piazza).</li>
</ul>
<p>Below create a video as a HTML file. More information can be shown by looking into the <code>animation</code> package. This can, however be done in a video taken in any way and is more free form.</p>
</div>
<div id="construct-a-portfolio" class="section level1">
<h1 class="hasAnchor">
<a href="#construct-a-portfolio" class="anchor"></a>Construct a portfolio</h1>
<p>Suppose that you are working in an investment firm company as a quantitative analyst. Your boss gives you the task of creating a portfolio for one of your clients. The client wants to find the portfolio with the smallest variance that satisfies the following constraints:</p>
<ul>
<li>Invest exactly $1,000,000.</li>
<li>Only invest in stocks that are in the S&amp;P500 index.</li>
<li>Spend less than $100 in execution.</li>
</ul>
<p>Your execution fees (i.e. the cost of buying shares) are given by <span class="math inline">\(C_i = \max \left(\$40, \$ 0.0001 \cdot X_i \right)\)</span> for each transaction where <span class="math inline">\(X_i\)</span> represent the amount of money you wish to invest in stock <span class="math inline">\(i\)</span>. For example, if you want to invest 30% and 70% in stocks A and B your total cost would be</p>
<p><span class="math display">\[
  \text{Cost} = C_1 + C_2 = \max \left(\$40, \$ 0.0001 \cdot 0.3 \cdot  10^6  \right) + \max \left(\$40, \$ 0.0001 \cdot 0.7 \cdot  10^6  \right) = \max(\$40, \$30) + \max(\$40, \$70) = \$40 + \$70 = \$110.
  \]</span></p>
<p>Note that <span class="math inline">\(\sum_i X_i = \$1,000,000\)</span>. Therefore, your boss want you to compute all possible portfolios that satify the client’s constraints, represent them graphically as (for example) in the graph below and find the weight of the best (i.e. minimum variance) portfolio.</p>
<center>
<img src="hw2_portfolio.png" style="width:50.0%">
</center>
<p>To help complete this task your boss tells you to use <strong>3 years</strong> of historical data and gives you this code to download the data you will need:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(quantmod)
<span class="kw">library</span>(rvest)
sp500 &lt;-<span class="st"> </span><span class="kw">read_html</span>(<span class="st">"https://en.wikipedia.org/wiki/List_of_S%26P_500_companies"</span>)

sp500 %&gt;%<span class="st"> </span>
<span class="kw">html_nodes</span>(<span class="st">".text"</span>) %&gt;%<span class="st"> </span>
<span class="kw">html_text</span>() -&gt;<span class="st"> </span>ticker_sp500

SP500_symbol &lt;-<span class="st"> </span>ticker_sp500[(<span class="dv">1</span>:<span class="dv">499</span>)*<span class="dv">2+1</span>]
SP500_symbol[SP500_symbol ==<span class="st"> "BRK.B"</span>] &lt;-<span class="st"> "BRK-B"</span>
SP500_symbol[SP500_symbol ==<span class="st"> "BF.B"</span>] &lt;-<span class="st"> "BF-B"</span></code></pre></div>
<p>He also mentioned that the function <code>get()</code> could be useful for this project and provides you with the example below:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(quantmod)
today &lt;-<span class="st"> </span><span class="kw">Sys.Date</span>()
three_year_ago &lt;-<span class="st"> </span><span class="kw">seq</span>(today, <span class="dt">length =</span> <span class="dv">2</span>, <span class="dt">by =</span> <span class="st">"-3 year"</span>)[<span class="dv">2</span>]
stocks_tickers &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"AAPL"</span>, <span class="st">"MSFT"</span>)
<span class="kw">getSymbols</span>(stocks_tickers, <span class="dt">from =</span> three_year_ago, <span class="dt">to =</span> today)</code></pre></div>
<pre><code>## [1] "AAPL" "MSFT"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nb_ticker &lt;-<span class="st"> </span><span class="kw">length</span>(stocks_tickers)
var_stocks &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="ot">NA</span>, nb_ticker)
<span class="kw">names</span>(var_stocks) &lt;-<span class="st"> </span>stocks_tickers

for (i in <span class="dv">1</span>:nb_ticker){
Xt =<span class="st"> </span><span class="kw">na.omit</span>(<span class="kw">ClCl</span>(<span class="kw">get</span>(stocks_tickers[i])))
stocks_tickers[i] =<span class="st"> </span><span class="kw">var</span>(Xt)
}
stocks_tickers</code></pre></div>
<pre><code>## [1] "0.000213028519449232" "0.000204423211059422"</code></pre>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#fizz-buzz">Fizz Buzz</a></li>
      <li><a href="#map">Map</a></li>
      <li><a href="#d-random-walks">3D-random walks</a></li>
      <li><a href="#construct-a-portfolio">Construct a portfolio</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Justin Lee, Stephane Guerrier, Roberto Molinari, Matthew Beckman.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
